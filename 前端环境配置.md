# 前端环境配置

config 目录下新建 uat.js:

```javascript
module.exports = {
  env: {
    NODE_ENV: '"production"',
    BASE_URL: JSON.stringify('https://oms-uat.jncapp.cn'),
    APPID: '"wx80c338ba268b3606"'
  },
  defineConstants: {},
  mini: {},
  h5: {
    /**
     * 如果h5端编译后体积过大，可以使用webpack-bundle-analyzer插件对打包体积进行分析。
     * 参考代码如下：
     * webpackChain (chain) {
     *   chain.plugin('analyzer')
     *     .use(require('webpack-bundle-analyzer').BundleAnalyzerPlugin, [])
     * }
     */
  }
}

```

config/index.js:

```javascript
module.exports = function (merge) {
  if (process.env.NODE_ENV === 'development') {
    return merge({}, config, require('./dev'))
  }
  if (process.argv[2] == 'uat') {
    return merge({}, config, require('./uat'))
  }
  return merge({}, config, require('./prod'))
}
```

那么我们可以在打包的时候，打印一下（启动项目是看不到的）:

```javascript
yarn build:weapp uat
```

![image-20200609112742920](C:\Users\cecil_he\AppData\Roaming\Typora\typora-user-images\image-20200609112742920.png)

process.argv （一个包含命令行参数的数组。第一个元素是’node’，第二个元素是JavaScript文件的文件名。接下来的元素则是附加的命令行参数。）

比如：

```
node app 127.0.0.1 7001  这时候通过.argv [2] 得到IP，argv[3]得到端口，更方便我们修改配置
```

