## 家乐福

### IOS 手机中 input 框中粘贴复制触发不了 Keyup 事件：

解决方法：

1. change 事件
2. input 事件



### JS 对 iframe 进行操作

这里我们需要使用两个API：

1. contentWindow--获取子页面window
2. postMessage--跨域情况下向子页面发送信息

```javascript
// 父页面
window.onload = function () {
    var frame = document.getElementById('iframeID').contentWindow;
    var message = {
        parentOrigin: window.origin,
        msg: '收到请回复'
    }
    // 向子页面发送信息
    frame.postMessage(JSON.stringify(message), 'http://子页面')
    // 接收从子页面传递过来的信息
    window.addEventListener('message', receiveMessage, false);
}

var receiveMessage = function (event) {
    if (event.origin !== '子页面') return;
    $('iframeID').attr('height', event.data + 50 + 'px')
}

// 子页面
// 接收从父页面传递过来的信息
window.addEventListener('message', function (event) {
    const data = JSON.parse(event.data)
    if (event.origin !== data.parentOrigin) return
    // 向父页面传递自身的滚动高度
    // event.source.postMessage(document.body.scrollHeight, event.origin)
    /**
    	这里最好是用 top,因为用 window 或者用 event.source 的话，会直接获取 iframe 页面的 window ，这样的话就会报错：failed to execude 'postMessage' on 'DOMWindow'，即因为不同源策略而报错了，用 top 的话，会直接获取 iframe 的 parent，即父页面，这样就可以避免不同源错误
    */
    top.postMessage(document.body.scrollHeight, event.origin)
}, false)
```

